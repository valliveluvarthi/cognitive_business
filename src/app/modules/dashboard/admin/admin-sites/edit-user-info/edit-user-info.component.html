<div class="content-wrapper">
    <form [formGroup]="form" #f="ngForm">
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Current Users</h4>
            <fa-icon (click)="activeModal.dismiss()" [icon]="faTimes" class="icon-circle icon-cross"></fa-icon>
        </div>
        <div class="modal-body">
            <div class="container">
                <div class="row row-padding">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                        User
                    </div>
                    <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5">
                        Role
                    </div>
                    <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1">
                        &nbsp;
                    </div>
                </div>
                <div class="loading" *ngIf="loading">
                    <div class="spinner-border text-custom" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
                <div *ngIf="!loading">
                    <div class="row" *ngFor="let row of ELEMENT_DATA; let i = index;">
                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 column-padding">
                            <span>{{row.email}}</span>
                        </div>
                        <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5">
                            <div ngbDropdown class="d-inline-block dd dropdown-input">
                                <mat-form-field class="example-full-width ip-field" appearance="fill" ngbDropdownToggle>
                                    <input matInput formControlName="{{row.email}}" readonly />
                                    <fa-icon [icon]="faChevronDown"
                                        class="icon-circle icon-cross dropdown-input-down-arrow"></fa-icon>
                                </mat-form-field>
                                <div ngbDropdownMenu class="dd-menu dropdown-input-menu">
                                    <ng-container *ngFor="let item of userRoles">
                                        <button (click)="selectUserRole(item,i,row)" ngbDropdownItem>
                                            {{ item }}
                                        </button>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 column-button-padding">
                            <button mat-icon-button class="delete" (click)="onDelete(i,row)">
                                <mat-icon aria-label="Delete" title="Delete">delete</mat-icon>
                            </button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                            <div ngbDropdown class="d-inline-block dd dropdown-input">
                                <mat-form-field class="example-full-width" appearance="fill" ngbDropdownToggle>
                                    <input matInput formControlName="user" name="userSite" id="site-menu"
                                        value="{{selectedUser}}" readonly />
                                    <fa-icon [icon]="faChevronDown"
                                        class="icon-circle icon-cross dropdown-input-down-arrow"></fa-icon>
                                </mat-form-field>
                                <div ngbDropdownMenu class="dd-menu dropdown-input-menu">
                                    <ng-container *ngFor="let item of USER_DATA">
                                        <button (click)="selectSiteUser(item)" ngbDropdownItem>
                                            {{ item.email }}
                                        </button>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5">
                            <div ngbDropdown class="d-inline-block dd dropdown-input">
                                <mat-form-field class="example-full-width ip-field" appearance="fill" ngbDropdownToggle>
                                    <input matInput formControlName="role" id="role-menu" value="{{selectedUserRole}}"
                                        readonly />
                                    <fa-icon [icon]="faChevronDown"
                                        class="icon-circle icon-cross dropdown-input-down-arrow"></fa-icon>
                                </mat-form-field>
                                <div ngbDropdownMenu class="dd-menu dropdown-input-menu">
                                    <ng-container *ngFor="let item of userRoles">
                                        <button (click)="selectUserRole(item,'','')" ngbDropdownItem>
                                            {{ item }}
                                        </button>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 column-button-padding">
                            <button mat-icon-button class="add" (click)="addUserToSite()">
                                <mat-icon aria-label="Add" title="Add New">add</mat-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>